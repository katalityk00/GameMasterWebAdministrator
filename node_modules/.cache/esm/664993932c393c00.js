'use strict';;let fs,settings;_2c3‍.x([["routes",()=>routes],["methods",()=>methods]]);_2c3‍.w("fs",[["default",["fs"],function(v){fs=v}]]);_2c3‍.w("../config/settings",[["default",["settings"],function(v){settings=v}]]);





function walkSync(dir, filelist) {

  const files = fs.readdirSync(dir);
  filelist = filelist || [];
  files.forEach(function(file) {
    if (fs.statSync(dir+'/' + file).isDirectory()) {
      filelist = walkSync(dir + file + '/', filelist);
    }
    else {
      filelist.push(dir+"/"+file);
    }
  });
  return filelist;
};

function appliRoute(routes){
  let methods = [];
  for(let i in routes){
    const Methods = require('.'+routes[i])
    methods.push(Methods);
  }
  return methods;
}

const rawRoutes = walkSync(settings.routePath);

const routes = rawRoutes.map(route =>{
  return route.substring(settings.routePath.length-1,route.length-3).replace("//","/");
}).filter(route => {
  const testA = route !== "/index";
  const testB = route.indexOf('.')!== -1;
  _2c3‍.g.console.log(route,testA,testB)
  return  testA && testB;
});

const methods  = appliRoute(routes);




